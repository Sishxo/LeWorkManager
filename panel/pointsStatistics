                    <!-- Page Heading -->
                    <h1 class="h3 mb-2 text-gray-800">积分获得明细</h1>
                    <p class="mb-4">统计自己的积分获的情况</p>

                    <!-- DataTales -->
                    <div class="card shadow mb-4">
                        <!-- 卡片标题 -->
                        <div class="card-header py-3">
                            <div style="display:inline-block;margin-top:8px">
                                <h6 class="m-0 font-weight-bold text-primary">统计时间</h6>
                            </div>
                            <div style="float:right">
                                <a href="javascript:statisticsChange()" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm">
                                    <i class="fas fa-pen fa-sm text-white-50"></i> 开始统计
                                </a>
                            </div>
                        </div>

                        <!-- 卡片内容 -->
                        <div class="card-body">
                            <div class="table-responsive">
                                <div id="dataTable_wrapper" class="dataTables_wrapper dt-bootstrap4">
                                    <!-- 统计时间 -->
                                    <div class="row" style="margin-bottom:0.5rem">
                                        
                                        <!-- 统计开始时间 -->
                                        <div class="col-sm-12 col-md-6">
                                            <div class="dataTables_length" id="">
                                                <label>
                                                    <div style="height:40px">
                                                        <div style="display:inline-block;padding-top:8px">
                                                            <font>统计开始时间<font color="red">*</font>：</font>
                                                        </div>
                                                        <div style="display:inline-block;width:60%">
                                                            <input type="text" class="form-control layui-input" id="startDateTime">
                                                        </div>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>

                                        <!-- 统计结束时间 -->
                                        <div class="col-sm-12 col-md-6">
                                            <div class="dataTables_length" id="">
                                                <label>
                                                    <div style="height:40px">
                                                        <div style="display:inline-block;padding-top:8px">
                                                            <font>统计结束时间<font color="red">*</font>：</font>
                                                        </div>
                                                        <div style="display:inline-block;width:60%">
                                                            <input type="text" class="form-control layui-input" id="endDateTime">
                                                        </div>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DataTales -->
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">泺研币获取统计表</h6>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <div id="dataTable_wrapper" class="dataTables_wrapper dt-bootstrap4">
                                    <!-- 表格上方 -->
                                    <div class="row" style="margin-bottom:0.5rem">
                                        
                                        <!-- 每页显示几条 -->
                                        <div class="col-sm-12 col-md-6">
                                            <div class="dataTables_length" id="dataTable_length">
                                                <label>
                                                    <div style="display:inline-block; margin-right:5px">
                                                        <font>每页显示</font>
                                                    </div>

                                                    <div style="display:inline-block">
                                                        <select id="money_length" aria-controls="dataTable" class="custom-select custom-select-sm form-control form-control-sm" onchange="moneyStatistics_lengthChange()">
                                                            <option value="10">10</option>
                                                            <option value="25">25</option>
                                                            <option value="50">50</option>
                                                            <option value="100">100</option>
                                                        </select>
                                                    </div>

                                                    <div style="display:inline-block; margin-left: 5px">
                                                        <font>条</font>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>

                                        <!-- 搜索框 -->
                                        <div class="col-sm-12 col-md-6">
                                            <div id="dataTable_filter" class="dataTables_filter">
                                                <label>
                                                    <div style="display:inline-block">
                                                        <font>筛选查找：</font>
                                                    </div>

                                                    <div style="display:inline-block">
                                                        <input type="search" class="form-control form-control-sm" aria-controls="dataTable" id="moneyCondition" onkeyup="moneyConditionReload()">
                                                        </input>
                                                    </div>

                    
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 表格本体 -->
                                    <div class="row">
                                        <div class="col-sm-12"> 
                                            <table class="table table-bordered" id="moneyStasticsTable" onclick="moneyStasticsClick()" width="100%" cellspacing="0">
                                                <thead>
                                                    <tr>
                                                        <th width="10%">序号</th>
                                                        <th width="10%">泺研币获取数量</th>
                                                        <th>任务标题</th>
                                                        <th width="20%">任务完成时间</th>
                                                        <th width="10%">复核人</th>
                                                        <th width="20%">复核时间</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <!-- 表格下方 -->
                                    <div class=row>
                                        
                                        <!-- 显示编号 -->
                                        <div class="col-sm-12 col-md-5">
                                            <label>
                                                <div style="display:inline-block; margin-right:5px">
                                                    <font>第</font>
                                                </div>

                                                <div style="display:inline-block;width:20%">
                                                    <input id="moneyPageInput" class="form-control form-control-sm" onchange="moneyPageInputChange()">
                                                    </input>
                                                </div>

                                                <div style="display:inline-block; margin-left: 5px">
                                                    <font>页</font>
                                                </div>
                                            </label>
                                        </div>

                                        <!-- 上一页 下一页 -->
                                        <div class="col-sm-12 col-md-7">
                                            <div class="dataTables_paginate paging_simple_numbers" id="dataTable_paginate">
                                                <ul class="pagination">
                                                    <li class="paginate_button page-item" id="dataTable_previous">
                                                        <button id="moneyPageReduct" onclick="moneyPageReduct()" class="page-link">
                                                            上一页
                                                        </button>
                                                    </li>
                                                    <li class="paginate_button page-item" id="dataTable_previous">
                                                        <button id="moneyPagePlus" onclick="moneyPagePlus()" class="page-link">
                                                            下一页
                                                        </button>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DataTales -->
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">泺学分获取统计表</h6>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <div id="dataTable_wrapper" class="dataTables_wrapper dt-bootstrap4">
                                    <!-- 表格上方 -->
                                    <div class="row" style="margin-bottom:0.5rem">
                                        
                                        <!-- 每页显示几条 -->
                                        <div class="col-sm-12 col-md-6">
                                            <div class="dataTables_length" id="dataTable_length">
                                                <label>
                                                    <div style="display:inline-block; margin-right:5px">
                                                        <font>每页显示</font>
                                                    </div>

                                                    <div style="display:inline-block">
                                                        <select id="points_length" aria-controls="dataTable" class="custom-select custom-select-sm form-control form-control-sm" onchange="pointsStatistics_lengthChange()">
                                                            <option value="10">10</option>
                                                            <option value="25">25</option>
                                                            <option value="50">50</option>
                                                            <option value="100">100</option>
                                                        </select>
                                                    </div>

                                                    <div style="display:inline-block; margin-left: 5px">
                                                        <font>条</font>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>

                                        <!-- 搜索框 -->
                                        <div class="col-sm-12 col-md-6">
                                            <div id="dataTable_filter" class="dataTables_filter">
                                                <label>
                                                    <div style="display:inline-block">
                                                        <font>筛选查找：</font>
                                                    </div>

                                                    <div style="display:inline-block">
                                                        <input type="search" class="form-control form-control-sm" aria-controls="dataTable" id="pointsCondition" onkeyup="pointsConditionReload()">
                                                        </input>
                                                    </div>

                    
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 表格本体 -->
                                    <div class="row">
                                        <div class="col-sm-12"> 
                                            <table class="table table-bordered" id="pointsStasticsTable" onclick="pointsStasticsClick()" width="100%" cellspacing="0">
                                                <thead>
                                                    <tr>
                                                        <th width="10%">序号</th>
                                                        <th width="10%">泺学分获取数量</th>
                                                        <th>任务标题</th>
                                                        <th width="20%">任务完成时间</th>
                                                        <th width="10%">复核人</th>
                                                        <th width="20%">复核时间</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <!-- 表格下方 -->
                                    <div class=row>
                                        
                                        <!-- 显示编号 -->
                                        <div class="col-sm-12 col-md-5">
                                            <label>
                                                <div style="display:inline-block; margin-right:5px">
                                                    <font>第</font>
                                                </div>

                                                <div style="display:inline-block;width:20%">
                                                    <input id="pointsPageInput" class="form-control form-control-sm" onchange="pointsPageInputChange()">
                                                    </input>
                                                </div>

                                                <div style="display:inline-block; margin-left: 5px">
                                                    <font>页</font>
                                                </div>
                                            </label>
                                        </div>

                                        <!-- 上一页 下一页 -->
                                        <div class="col-sm-12 col-md-7">
                                            <div class="dataTables_paginate paging_simple_numbers" id="dataTable_paginate">
                                                <ul class="pagination">
                                                    <li class="paginate_button page-item" id="dataTable_previous">
                                                        <button id="pointsPageReduct" onclick="pointsPageReduct()" class="page-link">
                                                            上一页
                                                        </button>
                                                    </li>
                                                    <li class="paginate_button page-item" id="dataTable_previous">
                                                        <button id="pointsPagePlus" onclick="pointsPagePlus()" class="page-link">
                                                            下一页
                                                        </button>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Area Chart -->
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">统计图表<font color="red">（本功能未开发完成）</font></h6>
                        </div>
                        <div class="card-body">

                            <!-- 折线图 -->
                            <div class="chart-area" style="height:500px; margin:0">
                                <!-- <canvas id="areaChart" style="width:100%; height:100%"></canvas> -->
                                <div id="areaChart" style="height: 100%"></div>
                            </div>

                            <!--
                            <hr>
                            Styling for the area chart can be found in the
                            <code>/js/demo/chart-area-demo.js</code> file.
                            -->
                        </div>
                    </div>

                    <div id="maxMoneyPage" style="display:none"></div>
                    <div id="maxPointsPage" style="display:none"></div>

                    <!-- JS脚本 -->
                    <script src="../js/echarts.js"></script>
                    <script type="text/javascript">
                        // 初始化页码
                        var moneyPage = 1
                        var pointsPage = 1

                        if (localStorage.getItem("moneyPage"))
                        {
                            moneyPage = localStorage.getItem("moneyPage")
                        }

                        if (localStorage.getItem("pointsPage"))
                        {
                            pointsPage = localStorage.getItem("pointsPage")
                        }

                        var oldMoneyCondition = ""
                        var oldPointsCondition = ""

                        /* ------------- 泺研币 -------------*/

                        // 获取积分明细统计表
                        function getMoneyStatistics()
                        {
                            $.ajax({
                                contentType: "application/x-www-form-urlencoded",
                                url:"../api/getMoneyPointsList.php",
                                type: "POST",
                                data:{
                                    page: moneyPage,
                                    length: $('#money_length option:selected').val(),
                                    moneyCondition: document.getElementById("moneyCondition").value,
                                    startDateTime: document.getElementById("startDateTime").value,
                                    endDateTime: document.getElementById("endDateTime").value,
                                    userId: userInfoJson.id
                                },
                                success:function(res){
                                    // console.log(res)
                                    var res_json = JSON.parse(res)
                                    // console.log(res_json)
                                    // console.log(res_json.code)
                                    if (res_json.code == 200)
                                    {
                                        // 获取成功
                                        // console.log(res_json.message)
                                        moneyList = res_json.message
                                        
                                        // 显示到列表
                                        $.each(res_json.message, function(i, money) {
                                            var index = (moneyPage - 1) * $('#money_length option:selected').val() + Number(i) + 1
                                            
                                            let str="<tr>"            
                                                + "<td>" + index +"</td>"
                                                + "<td>" + money.taskMoney+"</td>"
                                                + "<td>" + money.proName+"</td>"
                                                + "<td>" + money.realEndTime+"</td>"
                                                + "<td>" + money.adminName+"</td>"
                                                + "<td>" + money.insertDateTime+"</td>"
                                                + "</tr>";

                                            $("#moneyStasticsTable").append(str);
                                        })

                                        // 翻页按钮禁用判断
                                        if (moneyPage == 1)
                                        {
                                            document.getElementById('moneyPageReduct').disabled = "disabled"
                                            document.getElementById('moneyPageReduct').className = "page-link disabled"
                                        }
                                        else
                                        {
                                            document.getElementById('moneyPageReduct').disabled = ""
                                            document.getElementById('moneyPageReduct').className = "page-link"
                                        }

                                        var maxMoneyPage = Math.ceil(Number(res_json.listLength) / Number($('#money_length option:selected').val()))
                                        // console.log(Math.ceil(Number(res_json.listLength)))
                                        // console.log(Number($('#money_length option:selected').val()))

                                        if (moneyPage >= maxMoneyPage)
                                        {
                                            document.getElementById('moneyPagePlus').disabled = "disabled"
                                            document.getElementById('moneyPagePlus').className = "page-link disabled"
                                        }
                                        else
                                        {
                                            document.getElementById('moneyPagePlus').disabled = ""
                                            document.getElementById('moneyPagePlus').className = "page-link"
                                        }

                                        // 页码填进去框里
                                        document.getElementById('moneyPageInput').value = moneyPage
                                        document.getElementById('moneyPageInput').disabled = ""
                                        document.getElementById('maxMoneyPage').innerHTML = maxMoneyPage
                                    }
                                    else
                                    {
                                        // 获取失败，显示原因
                                        // console.log("获取泺研币列表失败")
                                        document.getElementById('maxMoneyPage').innerHTML = 0
                                        document.getElementById('moneyPageInput').disabled = "disabled"
                                        document.getElementById('moneyPageInput').value = ""
                                        document.getElementById('moneyPageReduct').disabled = "disabled"
                                        document.getElementById('moneyPageReduct').className = "page-link disabled"
                                        document.getElementById('moneyPagePlus').disabled = "disabled"
                                        document.getElementById('moneyPagePlus').className = "page-link disabled"
                                        let str="<tr><td colspan=\"6\" align=\"center\"> 未获取到泺研币明细 </td></tr>"
                                        $("#moneyStasticsTable").append(str);
                                    }
                                }
                            })
                        }

                        // 任务量统计 每页显示个数改变
                        function moneyStatistics_lengthChange()
                        {
                            moneyPage = 1
                            moneyReload()
                        }

                        function moneyReload()
                        {
                            // 清空表格
                            document.getElementById('moneyStasticsTable').innerHTML = "<thead> \
                                                    <tr> \
                                                        <th>序号</th> \
                                                        <th>泺学分获取数量</th> \
                                                        <th>任务标题</th> \
                                                        <th>任务完成时间</th> \
                                                        <th>复核人</th> \
                                                        <th>复核时间</th> \
                                                    </tr> \
                                                </thead> \
                                                <tbody> \
                                                </tbody>"
                            // 重新调用
                            getMoneyStatistics()
                        }

                        // 泺研币筛选条件改变
                        function moneyConditionReload()
                        {
                            var nowMoneyCondition = document.getElementById("moneyCondition").value

                            if (oldMoneyCondition != nowMoneyCondition)
                            {
                                // console.log(nowMoneyCondition)
                                // console.log(oldMoneyCondition)
                                moneyReload()

                                oldMoneyCondition = nowMoneyCondition
                            }
                        }

                        // 泺研币明细点击事件
                        function moneyStasticsClick()
                        {
                            // 获取点击任务的id号
                            var td = event.srcElement; // 通过event.srcElement 获取激活事件的对象 td
                            if (isNaN(td.parentElement.rowIndex))
                            {
                                var tdd = td.parentElement.parentElement.rowIndex
                            }
                            else
                            {
                                var tdd = td.parentElement.rowIndex
                            }
                            // console.log(td.parentElement.rowIndex + 1)
                            // console.log(td.parentElement.children[1].innerHTML)
                            // console.log(tdd)
                            if ((tdd > 0) && (document.getElementById('maxMoneyPage').innerHTML > 0))
                            {
                                clickId = moneyList[tdd - 1].taskId
                                // console.log(clickId)
                                localStorage.setItem("fromPage", "pointsStatistics")
                                localStorage.setItem("moneyPage", moneyPage)
                                toTaskInfo(clickId)
                            }
                        }

                        // 页码加减
                        function moneyPageReduct()
                        {
                            moneyPage = moneyPage - 1
                            moneyReload()
                        }

                        function moneyPagePlus()
                        {
                            moneyPage = moneyPage + 1
                            moneyReload()
                        }

                        // 泺研币任务页码突变
                        function moneyPageInputChange()
                        {
                            if (!(/(^[0-9]*[1-9][0-9]*$)/.test(document.getElementById('moneyPageInput').value)))
                            {
                                // 非正整数
                                if (document.getElementById('maxMoneyPage').innerHTML == 0)
                                {
                                    document.getElementById('moneyPageInput').value = ""
                                }
                                else
                                {
                                    document.getElementById('moneyPageInput').value = moneyPage
                                }

                                toastr.error("页码格式错误")
                            }
                            else if (document.getElementById('moneyPageInput').value > document.getElementById('maxMoneyPage').innerHTML)
                            {
                                // 页码超出了最大页
                                if (document.getElementById('maxMoneyPage').innerHTML == 0)
                                {
                                    document.getElementById('moneyPageInput').value = ""
                                }
                                else
                                {
                                    document.getElementById('moneyPageInput').value = moneyPage
                                }

                                toastr.error("页码已超出总数")
                            }
                            else if (document.getElementById('moneyPageInput').value <= 0)
                            {
                                // 页码负数/0
                                if (document.getElementById('maxMoneyPage').innerHTML == 0)
                                {
                                    document.getElementById('moneyPageInput').value = ""
                                }
                                else
                                {
                                    document.getElementById('moneyPageInput').value = moneyPage
                                }

                                toastr.error("页码不能为0或负数")
                            }
                            else
                            {
                                moneyPage = document.getElementById('moneyPageInput').value
                                moneyReload()
                            }
                        }

                        /* ------------- 泺研币 -------------*/

                        /* ------------- 泺学分 -------------*/

                        // 获取积分明细统计表
                        function getPointsStatistics()
                        {
                            $.ajax({
                                contentType: "application/x-www-form-urlencoded",
                                url:"../api/getMoneyPointsList.php",
                                type: "POST",
                                data:{
                                    page: pointsPage,
                                    length: $('#points_length option:selected').val(),
                                    pointsCondition: document.getElementById("pointsCondition").value,
                                    startDateTime: document.getElementById("startDateTime").value,
                                    endDateTime: document.getElementById("endDateTime").value,
                                    userId: userInfoJson.id
                                },
                                success:function(res){
                                    // console.log(res)
                                    var res_json = JSON.parse(res)
                                    // console.log(res_json)
                                    // console.log(res_json.code)
                                    if (res_json.code == 200)
                                    {
                                        // 获取成功
                                        // console.log(res_json.message)
                                        pointsList = res_json.message
                                        
                                        // 显示到列表
                                        $.each(res_json.message, function(i, points) {
                                            var index = (pointsPage - 1) * $('#points_length option:selected').val() + Number(i) + 1
                                            
                                            let str="<tr>"            
                                                + "<td>" + index +"</td>"
                                                + "<td>" + points.taskPoint+"</td>"
                                                + "<td>" + points.proName+"</td>"
                                                + "<td>" + points.realEndTime+"</td>"
                                                + "<td>" + points.adminName+"</td>"
                                                + "<td>" + points.insertDateTime+"</td>"
                                                + "</tr>";

                                            $("#pointsStasticsTable").append(str);
                                        })

                                        // 翻页按钮禁用判断
                                        if (pointsPage == 1)
                                        {
                                            document.getElementById('pointsPageReduct').disabled = "disabled"
                                            document.getElementById('pointsPageReduct').className = "page-link disabled"
                                        }
                                        else
                                        {
                                            document.getElementById('pointsPageReduct').disabled = ""
                                            document.getElementById('pointsPageReduct').className = "page-link"
                                        }

                                        var maxPointsPage = Math.ceil(Number(res_json.listLength) / Number($('#points_length option:selected').val()))
                                        // console.log(Math.ceil(Number(res_json.listLength)))
                                        // console.log(Number($('#points_length option:selected').val()))

                                        if (pointsPage >= maxPointsPage)
                                        {
                                            document.getElementById('pointsPagePlus').disabled = "disabled"
                                            document.getElementById('pointsPagePlus').className = "page-link disabled"
                                        }
                                        else
                                        {
                                            document.getElementById('pointsPagePlus').disabled = ""
                                            document.getElementById('pointsPagePlus').className = "page-link"
                                        }

                                        // 页码填进去框里
                                        document.getElementById('pointsPageInput').value = pointsPage
                                        document.getElementById('pointsPageInput').disabled = ""
                                        document.getElementById('maxPointsPage').innerHTML = maxPointsPage
                                    }
                                    else
                                    {
                                        // 获取失败，显示原因
                                        // console.log("获取泺学分列表失败")
                                        document.getElementById('maxPointsPage').innerHTML = 0
                                        document.getElementById('pointsPageInput').disabled = "disabled"
                                        document.getElementById('pointsPageInput').value = ""
                                        document.getElementById('pointsPageReduct').disabled = "disabled"
                                        document.getElementById('pointsPageReduct').className = "page-link disabled"
                                        document.getElementById('pointsPagePlus').disabled = "disabled"
                                        document.getElementById('pointsPagePlus').className = "page-link disabled"
                                        let str="<tr><td colspan=\"6\" align=\"center\"> 未获取到泺学分明细 </td></tr>"
                                        $("#pointsStasticsTable").append(str);
                                    }
                                }
                            })
                        }

                        // 任务量统计 每页显示个数改变
                        function pointsStatistics_lengthChange()
                        {
                            pointsPage = 1
                            pointsReload()
                        }

                        function pointsReload()
                        {
                            // 清空表格
                            document.getElementById('pointsStasticsTable').innerHTML = "<thead> \
                                                    <tr> \
                                                        <th>序号</th> \
                                                        <th>泺学分获取数量</th> \
                                                        <th>任务标题</th> \
                                                        <th>任务完成时间</th> \
                                                        <th>复核人</th> \
                                                        <th>复核时间</th> \
                                                    </tr> \
                                                </thead> \
                                                <tbody> \
                                                </tbody>"
                            // 重新调用
                            getPointsStatistics()
                        }

                        // 泺学分筛选条件改变
                        function pointsConditonReload()
                        {
                            var nowPointsCondition = document.getElementById("pointsCondition").value

                            if (oldPointsCondition != nowPointsCondition)
                            {
                                // console.log(nowPointsCondition)
                                // console.log(oldPointsCondition)
                                pointsReload()

                                oldPointsCondition = nowPointsCondition
                            }
                        }

                        // 泺学分明细点击事件
                        function pointsStasticsClick()
                        {
                            // 获取点击任务的id号
                            var td = event.srcElement; // 通过event.srcElement 获取激活事件的对象 td
                            if (isNaN(td.parentElement.rowIndex))
                            {
                                var tdd = td.parentElement.parentElement.rowIndex
                            }
                            else
                            {
                                var tdd = td.parentElement.rowIndex
                            }
                            // console.log(td.parentElement.rowIndex + 1)
                            // console.log(td.parentElement.children[1].innerHTML)
                            // console.log(tdd)
                            if ((tdd > 0) && (document.getElementById('maxPointsPage').innerHTML > 0))
                            {
                                clickId = pointsList[tdd - 1].taskId
                                // console.log(clickId)
                                localStorage.setItem("fromPage", "pointsStatistics")
                                localStorage.setItem("pointsPage", pointsPage)
                                toTaskInfo(clickId)
                            }
                        }

                        // 页码加减
                        function pointsPageReduct()
                        {
                            pointsPage = pointsPage - 1
                            pointsReload()
                        }

                        function pointsPagePlus()
                        {
                            pointsPage = pointsPage + 1
                            pointsReload()
                        }

                        // 已完成任务页码突变
                        function pointsPageInputChange()
                        {
                            if (!(/(^[0-9]*[1-9][0-9]*$)/.test(document.getElementById('pointsPageInput').value)))
                            {
                                // 非正整数
                                if (document.getElementById('maxPointsPage').innerHTML == 0)
                                {
                                    document.getElementById('pointsPageInput').value = ""
                                }
                                else
                                {
                                    document.getElementById('pointsPageInput').value = pointsPage
                                }

                                toastr.error("页码格式错误")
                            }
                            else if (document.getElementById('pointsPageInput').value > document.getElementById('maxPointsPage').innerHTML)
                            {
                                // 页码超出了最大页
                                if (document.getElementById('maxPointsPage').innerHTML == 0)
                                {
                                    document.getElementById('pointsPageInput').value = ""
                                }
                                else
                                {
                                    document.getElementById('pointsPageInput').value = pointsPage
                                }

                                toastr.error("页码已超出总数")
                            }
                            else
                            {
                                pointsPage = document.getElementById('pointsPageInput').value
                                pointsReload()
                            }
                        }

                        /* ------------- 泺学分 -------------*/

                        /* ------------- 折线图 -------------*/

                        // 图表初始化
                        var areaChart = echarts.init(document.getElementById('areaChart'));

                        option = {
                            xAxis: {
                                type: 'category',
                                data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
                            },
                            yAxis: [
                                {
                                    type: 'value',
                                    scale: true,
                                    name: '泺研币',
                                    max: 300,
                                    min: 0,
                                    boundaryGap: [0.2, 0.2]
                                },
                                {
                                    type: 'value',
                                    scale: true,
                                    name: '泺学分',
                                    max: 1200,
                                    min: 0,
                                    boundaryGap: [0.2, 0.2]
                                }
                            ],
                            series: [
                                {
                                    data: [150, 230, 224, 218, 135, 147, 260],
                                    yAxisIndex: 0,
                                    type: 'line'
                                },
                                {
                                    data: [900, 800, 724, 518, 635, 347, 260],
                                    yAxisIndex: 1,
                                    type: 'line'
                                }
                            ]
                        }

                        setTimeout( function(){
                            // 加载
                            areaChart.setOption(option)
                        }, 500 );//延迟加载
                        

                        /* ------------- 折线图 -------------*/

                        // 计算起止时间并自动填上
                        function calcuTime()
                        {
                            var date = new Date()
                            var day_30 = new Date().setMonth((new Date().getMonth()-1))    //日期是30天前的对应时间戳
                            date_30 = new Date(day_30)       //转换成标准时间
			
                            var endYear = date.getFullYear()        //年 ,从 Date 对象以四位数字返回年份
                            var endMonth = date.getMonth() + 1      //月 ,从 Date 对象返回月份 (0 ~ 11) ,date.getMonth()比实际月份少 1 个月
                            var endDay = date.getDate()             //日 ,从 Date 对象返回一个月中的某一天 (1 ~ 31)
                            var startYear = date_30.getFullYear()
                            var startMonth = date_30.getMonth() + 1
                            var startDay = date_30.getDate()             
                            
                            //修改月份格式
                            if (startMonth >= 1 && startMonth <= 9)
                            {
                                startMonth = "0" + startMonth;
                            }

                            if (endMonth >= 1 && endMonth <= 9)
                            {
                                endMonth = "0" + endMonth;
                            }
                            
                            //修改日期格式
                            if (startDay >= 1 && startDay <= 9)
                            {
                                startDay = "0" + startDay;
                            }

                            if (endDay >= 1 && endDay <= 9)
                            {
                                endDay = "0" + endDay;
                            }
                            
                            //格式化
                            var endDate = endYear + "-" + endMonth + "-" + endDay + " 23:59:59"
                            var startDate = startYear + "-" + startMonth + "-" + startDay + " 00:00:00"
                            document.getElementById("startDateTime").value = startDate
                            document.getElementById("endDateTime").value = endDate

                            // 调用
                            getMoneyStatistics()
                            getPointsStatistics()
                        }

                        calcuTime()

                        // 统计时间改变
                        function statisticsChange()
                        {
                            // 重新获取表格
                            moneyStatistics_lengthChange()
                            pointsStatistics_lengthChange()
                        }

                        // 日期时间选择器
                        laydate.render({
                            elem: '#startDateTime', //指定元素
                            type: 'datetime'
                        });

                        // 日期时间选择器
                        laydate.render({
                            elem: '#endDateTime', //指定元素
                            type: 'datetime'
                        });

                        function toTaskInfo(taskId)
                        {
                            // localStorage.setItem("nowPage", "taskInfo");
                            localStorage.setItem("taskId", taskId);
                            // console.log(localStorage.getItem("taskId"))
                            window.location.href = "index.php?nowPage=taskInfo";
                            // location.reload();
                        }
                    </script>